package{	import flash.display.Stage;	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.MouseEvent;	public class Main extends MovieClip{		public var player:Player;		public var bulletList:Array = [];		public var mousePressed:Boolean = false; 		public var delayCounter:int = 0; 		public var delayMax:int = 8;		public function Main():void{			player = new Player(stage, 320, 240);			stage.addChild(player);			stage.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler, false, 0, true);			stage.addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler, false, 0, true);			stage.addEventListener(Event.ENTER_FRAME, loop, false, 0, true);		}		public function loop(e:Event):void{			if(mousePressed){				delayCounter++; 				if(delayCounter == delayMax) {					shootBullet(); 					delayCounter = 0;				}			}						if(bulletList.length > 0){				for(var i:int = bulletList.length-1; i >= 0; i--){					bulletList[i].loop();				}			}		}		public function mouseDownHandler(e:MouseEvent):void 			mousePressed = true;		}				public function mouseUpHandler(e:MouseEvent):void 			mousePressed = false;		}				public function shootBullet():void {			var bullet:Bullet = new Bullet(stage, player.x, player.y, player.rotation);			bullet.addEventListener(Event.REMOVED_FROM_STAGE, bulletRemoved, false, 0, true);			bulletList.push(bullet);			stage.addChild(bullet);		}				public function bulletRemoved(e:Event):void{			e.currentTarget.removeEventListener(Event.REMOVED_FROM_STAGE, bulletRemoved);			bulletList.splice(bulletList.indexOf(e.currentTarget),1);		}	}}